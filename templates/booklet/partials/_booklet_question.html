{# D:\GAT\templates\booklet\partials\_booklet_question.html #}

<div class="question-item-wrapper" 
     data-id="{{ question.id }}" 
     data-type="question" 
     data-subject-id="{{ question.subject.id }}">
    
    <div class="q-num"></div> 

    <div class="q-body">
        {# –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ #}
        <div class="question-text-wrapper">
            <p class="editable-text hover:bg-yellow-50 rounded px-1 transition-colors border border-transparent hover:border-yellow-300 inline-block"
               contenteditable="true"
               onblur="saveText(this, 'question', {{ question.id }})">
               {{ question.text|linebreaksbr }}
            </p>
        </div>

        {# –ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ #}
        {% if question.question_image %}
            <div class="editable-image-container" 
                 style="width: {{ question.image_width|default:'100%' }};"
                 data-question-id="{{ question.id }}">
                <img src="{{ question.question_image.url }}" 
                     alt="Question Image" 
                     onclick="openCropper(this.parentNode, {{ question.id }})">
                <div class="resize-handle" onmousedown="initResize(event, {{ question.id }})">‚Üî</div>
            </div>
        {% endif %}
        
        {# –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ #}
        <ul>
            {% for option in question.fixed_options %}
            <li data-id="{{ option.id }}" data-is-correct="{{ option.is_correct|yesno:'true,false' }}">
                <input type="radio" class="hidden-radio">
                <label class="option-label" style="display: flex; align-items: flex-start;">
                    {# –ë—É–∫–≤–∞ (A, B, C...) –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è CSS —á–µ—Ä–µ–∑ counter, –∑–¥–µ—Å—å span –ø—É—Å—Ç–æ–π –¥–ª—è –æ—Ç—Å—Ç—É–ø–∞ #}
                    <span class="opt" style="margin-top: 2px;"></span> 
                    
                    <div style="display: flex; flex-direction: column;">
                        {# –¢–µ–∫—Å—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∞ #}
                        <span class="option-text hover:bg-yellow-50 rounded px-1 transition-colors border border-transparent hover:border-yellow-300"
                              contenteditable="true"
                              onblur="saveText(this, 'option', {{ option.id }})">
                              {{ option.text|linebreaksbr }}
                        </span>

                        {# --- üî• –î–û–ë–ê–í–õ–ï–ù–û: –ö–ê–†–¢–ò–ù–ö–ê –í–ê–†–ò–ê–ù–¢–ê --- #}
                        {% if option.option_image %}
                            <img src="{{ option.option_image.url }}" 
                                 alt="Option Image" 
                                 class="option-img"
                                 style="max-height: 80px; width: auto; margin-top: 5px; border-radius: 4px; border: 1px solid #eee;">
                        {% endif %}
                        {# --- –ö–û–ù–ï–¶ –î–û–ë–ê–í–õ–ï–ù–ò–Ø --- #}
                    </div>
                </label>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>