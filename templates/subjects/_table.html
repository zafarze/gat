{# D:\New_GAT\templates\subjects\_table.html #}
<table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
        <tr>
            <th class="table-header">Название предмета</th>
            <th class="table-header">Сокращение</th>
            {% if user.is_superuser %}
            <th class="table-header text-center">Действия</th>
            {% endif %}
        </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
        {% for item in items %}
        <tr>
            <td class="table-cell font-medium">{{ item.name }}</td>
            <td class="table-cell">{{ item.abbreviation|default:"" }}</td>

            {% if user.is_superuser %}
            <td class="px-6 py-4 whitespace-nowrap text-center">
                {# Кнопки Редактировать / Удалить остаются без изменений #}
                <button hx-get="{% url edit_url item.pk %}" hx-target="#modal-content" hx-swap="innerHTML"
                        @click="showModal = true" title="Редактировать" class="icon-button indigo">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" /><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" /></svg>
                </button>
                <button @click="showDeleteModal = true; deleteUrl = '{% url delete_url item.pk %}'; deleteItemName = '{{ item.name|escapejs }}';"
                        title="Удалить" class="icon-button red">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
                </button>
            </td>
            {% endif %}
        </tr>
        {% empty %}
        <tr>
            {# Изменяем colspan с 3 на 2 (или с 2 на 1, если нет действий) #}
            <td colspan="{% if user.is_superuser %}2{% else %}1{% endif %}" class="text-center py-10 text-gray-500">Предметы не найдены.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{# Пустой div для delete_modal остается #}
<div id="delete-modal-content"></div>