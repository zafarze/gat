{# D:\GAT\templates\gat_tests\partials\_school_card.html (–ü–æ–ª–Ω—ã–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥) #}
<div id="school-card-{{ school.id }}" class="data-card p-6">
    <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">{{ school.name }}</h2>
        {# --- –ö–Ω–æ–ø–∫–∞ –ù–∞–∑–Ω–∞—á–∏—Ç—å GAT –¢–µ—Å—Ç --- #}
        {% if user.is_superuser %}
        <button
                @click="showModal = true" {# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Alpine –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é #}
                hx-get="{% url 'core:gat_test_add' %}?school={{ school.pk }}" {# URL –¥–ª—è —Ñ–æ—Ä–º—ã #}
                hx-target="#modal-content" {# –ö—É–¥–∞ –≥—Ä—É–∑–∏—Ç—å #}
                hx-swap="innerHTML"
                hx-indicator="#modal-loading-indicator"
                class="modern-btn primary small flex items-center gap-1.5">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>
            <span>–ù–∞–∑–Ω–∞—á–∏—Ç—å GAT –¢–µ—Å—Ç</span>
        </button>
        {% endif %}
    </div>

    <div class="border border-gray-200 rounded-lg overflow-x-auto">
        <table class="min-w-full">
            <thead class="bg-gray-50">
                <tr>
                    <th class="table-header">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞</th>
                    <th class="table-header">–ß–µ—Ç–≤–µ—Ä—Ç—å</th>
                    <th class="table-header">–î–∞—Ç–∞</th>
                    <th class="table-header">–î–µ–Ω—å</th>
                    {% if user.is_superuser %}
                    <th class="table-header text-right">–î–µ–π—Å—Ç–≤–∏—è</th>
                    {% endif %}
                </tr>
            </thead>
            {# –î–æ–±–∞–≤–ª—è–µ–º ID –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ HTMX #}
            <tbody id="table-body-{{ school.id }}" class="bg-white divide-y divide-gray-200">
                {% for test in tests %}
                <tr class="hover:bg-gray-50 transition-colors">
                    <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 border-r">{{ test.name }}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500 border-r">{{ test.quarter.name }}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500 border-r">{{ test.test_date|date:"d.m.Y" }}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500 border-r">{{ test.get_day_display }}</td>

                    {% if user.is_superuser %}
                    <td class="px-4 py-3 whitespace-nowrap text-right text-sm font-medium">

                        {# --- üëá –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ó–∞–º–µ–Ω—è–µ–º button –Ω–∞ a üëá --- #}
                        <a href="{% url 'core:gat_test_edit' test.pk %}"
                           class="modern-btn secondary small">
                            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </a>
                        {# --- –ö–û–ù–ï–¶ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø --- #}

                        {# --- –°—Å—ã–ª–∫–∞ –£–¥–∞–ª–∏—Ç—å –†–µ–∑—É–ª—å—Ç–∞—Ç—ã --- #}
                        <a href="{% url 'core:gat_test_delete_results' test.pk %}"
                           class="modern-btn warning small ml-2">
                            –£–¥–∞–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                        </a>
                        {# --- –ö–Ω–æ–ø–∫–∞ –£–¥–∞–ª–∏—Ç—å –¢–µ—Å—Ç --- #}
                        <button
                                {# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Alpine –¥–ª—è –æ–∫–Ω–∞ —É–¥–∞–ª–µ–Ω–∏—è #}
                                @click="showDeleteModal = true;
                                        deleteUrl = '{% url 'core:gat_test_delete' test.pk %}';
                                        deleteItemName = '{{ test.name|escapejs }}';"
                                class="modern-btn danger small ml-2">
                            –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç
                        </button>
                    </td>
                    {% endif %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="{% if user.is_superuser %}5{% else %}4{% endif %}" class="px-4 py-6 text-center text-sm text-gray-500">
                        –î–ª—è —ç—Ç–æ–π —à–∫–æ–ª—ã –Ω–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>